<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Hello World</title>
</head>
<body>
    <script type="text/javascript">

        //Example using promises
        //https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise
        async function getApi1() {

            console.log("Calling endpoint");

            var result = "";
            var address = "/fetch/assets/data/api-3.json";
            var headers = {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    };
            try {
                let response = await fetch(address, {
                    method: 'GET',
                    headers: headers
                });
                if (!response.ok) {
                    console.error(response);
                    throw new Error("HTTP error!");
                }
                var data = await response.json();
                console.log(data);
                result = data;
                console.log("End Function");
                return result;
            } catch (e) {
                console.error("Error " + e)
                result = [];
                return result;
            }
        }

        getApi1().then(data => {
                console.log(data);
                data.forEach(element => console.log(element.name));
                console.log("End example");
            })
    </script>
</body>
</html>
